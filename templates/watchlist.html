{% extends 'base.html' %}
{% block content %}

  <h2>Your Watch List</h2>

  <ul>
    {% for uprod in userproducts %}
      <div>
          <b>{{uprod.product_name}}</b><br>
          <!-- style image dimension using css -->
          <img src = "{{ uprod.image }}" height="300" width="200"><br>
          Current Price: ${{ uprod.current_price }}<br>
          <!-- always show wanted price in 2 decimal places -->
          Wanted Price: $<span id='wanted_price'>{{ uprod.threshold }}</span><br>
          <a href="{{ uprod.url }}">Buy now!</a></p>

          <form action='/update', method='POST', id='update_form'>
            <input type='number', id='new_threshold', name='new_threshold', step="0.01">
            <input type='hidden', id = 'product_id', name="product_id", value="{{ uprod.product_id }}">
            <input type='submit', id='update_threshold', value='Update wanted price'>
          </form>
          <form action='/remove', method='POST', id='remove_form'>
            <input type='hidden', name="product_id", value="{{ uprod.product_id }}">
            <input type='submit', id='remove_item', value='Remove item from wishlist'>
          </form>

      </div>
    {% endfor %}
  </ul>

 <b>Add another item</b>
<form action='/add_item', method='POST'>
    Amazon URL: <input type='text', id='url', name='url'><br>
    Wanted Price: <input type='number', id='threshold', name='threshold', step="0.01"><br>
    <input type='submit', id='add_item', value='Watch item'>
</form>
  <script src="http://code.jquery.com/jquery.js"></script>
  <script src="/static/js/watchlist.js"></script>

{% endblock %}