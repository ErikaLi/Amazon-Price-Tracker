{% extends 'base.html' %}
{% block content %}

{% if session.get('user_id') %}
    <!-- personalize welcome message -->
    <h4>Hi, {{ name }}! Here are products that you may be interested in:</h4>
    <ul id='recommendation_list'>
    {% for rec in recommendations %}
      <div class='product_box' id='recommendation{{rec.recommendation_id}}'>
        <img src = "{{ rec.image }}"><br>
        <span class='product_name'>{{rec.name}}</span><br>
        Current Price: <span class='current_price'>${{ rec.price }}</span><br>
        <form action=# method='POST' id='add_rec{{ rec.recommendation_id }}'>
            Wanted Price: <input type='number' id='rec_wanted{{ rec.recommendation_id }}' step="1.00" required>
            <input type='submit' value='Add Item to Watchlist' id=''>
        </form>
          <a href="{{ rec.url }}">Buy now!</a></p>
      </div>
    {% endfor %}
    </ul>

{% else %}
    <div class="homepage-hero-module">
    <div class="video-container">
        <div class="filter"></div>
        <video autoplay loop class="fillWidth">
            <source src="static/Workaholic.mp4" type="video/mp4" />Your browser does not support the video tag. I suggest you upgrade your browser.
            <source src="static/Workaholic.webm" type="video/webm" />Your browser does not support the video tag. I suggest you upgrade your browser.
        </video>
        <div class="poster hidden">
            <img src="static/Workaholic.jpg" alt="">
        </div>
    </div>
    </div>

    <div id="sign-in-box">
    <div id='sign-in-form'>
    <h3>Welcome to Amazon Price Tracker!</h3> 
    <form class='sign-in' action='/login' method='POST'>
            <label name='sign-in-page'> 
                <b>Email: </b><br>
                <input type="email" id="email" name="email" placeholder='email@domain.com' maxlength='256' required><br>
                <b>Password: </b><br>
                <input type="password" id="pw" name="pw" placeholder='cAsE SeNsItiVe' required>
            </label><br><br>
        <div id='submit-buttons'>
                <input type="submit" value="Sign-in"><button type='button' id="register-button">Register!</button>
        </div>
        </form>
    </div>
</div>
{% endif %}

<script src="http://code.jquery.com/jquery.js"></script>
<script src="/static/js/add_rec.js"></script>

{% endblock %}

{% block JQ %}
    <script>
    $(function() {
            $('.homepage-hero-module').css({
                'position' : 'absolute',
                'top' : '-20px',
                'left' : '-20px',
                'width' : '100%',
                'z-index' : -1
            });
        });
        $(function() {
            $('#sign-in-form').css({
                'position' : 'absolute',
                'left' : '50%',
                'top' : '50%',
                'padding' : '1%',
                'margin-left' : function() {return -$(this).outerWidth()/2},
                'margin-top' : function() {return -$(this).outerHeight()/2},
                'background': 'rgb(255, 255, 255)',
                'background': 'rgba(255, 255, 255, 0.3)'
            });
        });
    $('#register-button').on('click', function(){
        window.location.href='/register';
    });
        
    </script>
{% endblock %}